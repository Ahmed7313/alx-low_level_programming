#!/bin/bash

# Check if CFILE variable is set
if [[ -z "$CFILE" ]]; then
    echo "Please set the CFILE environment variable."
    exit 1
fi

# Generate the assembly code using gcc
gcc -S -masm=intel "$CFILE"

# Rename the generated .s file to match the C file's name
output_file="${CFILE%.c}.s"
mv "${CFILE%.c}.s" "$output_file"

echo "Assembly code saved in $output_file"